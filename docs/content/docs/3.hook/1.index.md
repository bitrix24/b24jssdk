---
title: B24Hook
description: 'Use B24Hook for making Bitrix24 REST API calls from the server. Authentication is embedded in the webhook path.'
navigation:
  title: Hook
links:
  - label: B24Hook
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/hook/controller.ts
  - label: TypeB24
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/b24.ts
  - label: AuthHookManager
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/hook/auth.ts
---

::warning
We are still updating this page. Some data may be missing here — we will complete it shortly.
::

::caution
B24Hook (Webhook) is not safe for client-side use — keep and use it only on the server
::

> B24Hook implements the [`TypeB24`](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/b24.ts) interface.

## Creating

### fromWebhookUrl()

`static fromWebhookUrl(url: string): B24Hook`{lang="ts-type"}

Static method creates a `B24Hook` instance from a full webhook URL.

| Parameter | Type                     | Description                                                                        |
|-----------|--------------------------|------------------------------------------------------------------------------------|
| `url`     | `string`{lang="ts-type"} | Bitrix24 webhook URL, for example: `https://your_domain.bitrix24.com/rest/1/xxx/`  |

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
```

### constructor()

`constructor(b24HookParams: B24HookParams)`{lang="ts-type"}

Constructor creates a B24Hook instance from parameters of type [`B24HookParams`](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/auth.ts):

| Parameter | Type                     | Description                                                          |
|-----------|--------------------------|----------------------------------------------------------------------|
| `b24Url`  | `string`{lang="ts-type"} | Bitrix24 portal URL, for example: `https://your_domain.bitrix24.com` |
| `userId`  | `number`{lang="ts-type"} | User identifier                                                      |
| `secret`  | `string`{lang="ts-type"} | Secret key                                                           |

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

const $b24 = new B24Hook({
  b24Url: 'https://your_domain.bitrix24.com',
  userId: 123,
  secret: 'k32t88gf3azpmwv3'
})
```

## Getters

### isInit

`get isInit(): boolean`{lang="ts-type"}

Indicates whether the data is initialized. [Similar function](https://apidocs.bitrix24.com/sdk/bx24-js-sdk/system-functions/bx24-init.html) in BX24.js.

```ts [Example.ts]
import { B24Hook, LoggerBrowser } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info($b24.isInit)
```

### auth

`get auth(): AuthActions`{lang="ts-type"}

Returns an instance [AuthHookManager](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/hook/auth.ts) that implements the `AuthActions` interface, which contains methods for handling authorization operations.

::code-group

```ts [Example.ts]
import { B24Hook, LoggerBrowser } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info($b24.auth)
```

```ts [AuthActions.ts]
/**
 * Interface for updating authorization
 */
interface AuthActions {
  getAuthData: () => false | AuthData
  refreshAuth: () => Promise<AuthData>
  getUniq: (prefix: string) => string
  isAdmin: boolean
}
```
::

## Methods

### callMethod()

::caution
@todo
::

`callMethod(method: string, params?: object, start?: number): Promise<AjaxResult>`{lang="ts-type"}

Calls a REST API method with the specified parameters. [Similar function](https://apidocs.bitrix24.com/sdk/bx24-js-sdk/how-to-call-rest-methods/bx24-call-method.html) in BX24.js.

| Parameter | Type     | Description                                   |
|-----------|----------|-----------------------------------------------|
| `method`  | `string` | Request method.                               |
| `params`  | `object` | Request parameters.                           |
| `start`   | `number` | This parameter is used to control pagination. |

::note
The page size of results is always static — `50` records.
To select the second page of results, pass the value `start = 50`. To select the third page of results — the value `start = 100`, and so on.
The formula for calculating the start parameter value: `start = (N-1) * 50`, where `N` — the desired page number
::

::callout{color="air-primary" title="Retrieve Large Volumes of Data" to="https://apidocs.bitrix24.com/settings/performance/huge-data.html"}
If you do not need the count of elements (for example, if you only need the last 10 records), or if you are importing all records based on a filter, you should pass `start = -1`.
::

Returns a `Promise` that resolves to an [`AjaxResult`](/docs/core/ajax-result/).


::code-group

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info('@todo')
```

```ts [AjaxResult.ts]
// @todo
```

::

### callBatch()

::caution
@todo
::

`callBatch(): ??`{lang="ts-type"}

??? 

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info('??')
```

### callListMethod()

::caution
@todo
::

`callListMethod(): ??`{lang="ts-type"}

??? 

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info('??')
```

### fetchListMethod()

::caution
@todo
::

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info('??')
```

### getTargetOrigin()

`getTargetOrigin(): string`{lang="ts-type"}

Returns the Bitrix24 address (e.g., `https://your_domain.bitrix24.com`). [Similar function](https://apidocs.bitrix24.com/sdk/bx24-js-sdk/additional-functions/bx24-get-domain.html) in BX24.js.

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info($b24.getTargetOrigin()) // https://your_domain.bitrix24.com
```

### getTargetOriginWithPath()

`getTargetOriginWithPath(): string`{lang="ts-type"}

Returns the Bitrix24 address (e.g., `https://your_domain.bitrix24.com/rest/1/xxx`). [Similar function](https://apidocs.bitrix24.com/sdk/bx24-js-sdk/additional-functions/bx24-get-domain.html) in BX24.js.

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)

const $logger = LoggerBrowser.build('MyApp', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

$logger.info($b24.getTargetOriginWithPath()) // https://your_domain.bitrix24.com/rest/1/xxx
```

### setLogger()

`setLogger(logger: LoggerBrowser): void`{lang="ts-type"}

Sets a custom [LoggerBrowser](/docs/core/logger-browser/) instance for `B24Hook`.

Use this method to configure detailed logging during development.
The logger will be automatically passed to the HTTP client for end-to-end logging of requests.

::code-group

```ts [SimpleLogger.ts]
import { B24Hook, LoggerBrowser, LoggerType } from '@bitrix24/b24jssdk'

// Define the dev mode
const devMode = typeof import.meta !== 'undefined' && (import.meta.env?.DEV || import.meta.dev)
const loggerForDebugB24 = LoggerBrowser.build('MyApp:DebugB24', devMode)

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
$b24.setLogger(loggerForDebugB24)
```

```ts [FineTuningLogger.ts]
import { B24Hook, LoggerBrowser, LoggerType } from '@bitrix24/b24jssdk'

// Example of fine-tuning a `Logger Browser` instance for `B24 Hook`
const loggerForDebugB24 = LoggerBrowser.build('MyApp:DebugB24')
loggerForDebug.setConfig({
  [LoggerType.desktop]: false,
  [LoggerType.log]: true,
  [LoggerType.info]: true,
  [LoggerType.warn]: true,
  [LoggerType.error]: true,
  [LoggerType.trace]: true,
})

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
$b24.setLogger(loggerForDebugB24)
```

::

### getLogger()

`getLogger(): LoggerBrowser`{lang="ts-type"}

Returns the current [LoggerBrowser](/docs/core/logger-browser/).

If the logger wasn't set via `setLogger()`, the method will return a [`NullLogger`](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/core/abstract-b24.ts#L41) instance, which logs only errors.

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
const loggerFromB24 = $b24.getLogger()

loggerFromB24.log('Processing', 'some value')
loggerFromB24.info('Initializing module...')
loggerFromB24.warn('It is not recommended to use the outdated method.')
loggerFromB24.error('Operation execution error', { code: 500 })
```

### destroy()

`destroy(): void`{lang="ts-type"}

Destructor. Used to destroy or clean up resources.

### offClientSideWarning()

`offClientSideWarning(): void`{lang="ts-type"}

Disables warning about front-end query execution.

```ts [Example.ts]
import { B24Hook } from '@bitrix24/b24jssdk'

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')

// @memo: You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
$b24.offClientSideWarning()
```

## Examples

::caution
You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
::

Construct from webhook URL and call REST API:

```ts
import { B24Hook, EnumCrmEntityTypeId, LoggerBrowser, Result } from '@bitrix24/b24jssdk'

const $logger = LoggerBrowser.build('MyApp', import.meta.env?.DEV === true)

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/k32t88gf3azpmwv3')

// Single method
const res = await $b24.callMethod(
  'crm.item.list',
  {
    entityTypeId: EnumCrmEntityTypeId.company,
    order: { id: 'desc' },
  }
)
$logger.info('companies:', res.getData().result)

// Batch (array syntax)
const batch: Result = await $b24.callBatch([
  ['crm.item.list', { entityTypeId: EnumCrmEntityTypeId.company, select: ['id'] }],
  ['crm.item.list', { entityTypeId: EnumCrmEntityTypeId.contact, select: ['id'] }]
], true)

$logger.info('batch:', batch.getData())
```

This code creates an instance of `B24Hook` to interact with the Bitrix24 API and performs a batch request to retrieve a list of companies, sorting them by ID in descending order.

The retrieved data is transformed into an array of objects with fields `id`, `title`, and `createdTime`, after which the results are logged to the console, and in case of an error, an error message is displayed.

::caution
You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
::

```ts
import { B24Hook, Text, EnumCrmEntityTypeId, LoggerBrowser, Result } from '@bitrix24/b24jssdk'
import type { SODate } from '@bitrix24/b24jssdk'

const $logger = LoggerBrowser.build('MyApp', import.meta.env?.DEV === true)

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
const $b24 = new B24Hook({
  b24Url: 'https://your_domain.bitrix24.com',
  userId: 123,
  secret: 'k32t88gf3azpmwv3',
})

/**
 * @memo You should not use hook requests on the front-end side.
 * This operation is unsafe. Instead, use the back-end.
 */
$b24.callBatch({
  CompanyList: {
    method: 'crm.item.list',
    params: {
      entityTypeId: EnumCrmEntityTypeId.company,
      order: { id: 'desc' },
      select: ['id', 'title', 'createdTime']
    }
  }
}, true)
  .then((response: Result) => {
    const data = response.getData()
    const dataList = (data.CompanyList.items || []).map((item: any) => {
      return {
        id: Number(item.id),
        title: item.title,
        createdTime: Text.toDateTime(item.createdTime as ISODate)
      }
    })
    $logger.info('response >> ', dataList)
  })
  .catch((error) => {
    $logger.error(error)
  })
  .finally(() => {
    $logger.info('load >> stop ')
  })
```

Listing helpers

::caution
You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
::

```ts
// Pull a full list with automatic paging
const list = await $b24.callListMethod('crm.item.list', {
  entityTypeId: EnumCrmEntityTypeId.deal,
  select: ['id', 'title']
})
console.log(list.getData()) // array of items

// Or stream chunks
for await (const chunk of $b24.fetchListMethod('crm.item.list', { entityTypeId: EnumCrmEntityTypeId.deal }, 'id')) {
  console.log('chunk size', chunk.length)
}
```

---


### `callListMethod` {#callListMethod}

```ts
callListMethod(
  method: string,
  params ? : object,
  progress ? : null | ((progress: number) => void),
  customKeyForResult ? : string | null
): Promise<Result>
```

Calls a REST API list method with the specified parameters.

| Parameter            | Type                                 | Description                        |
|----------------------|--------------------------------------|------------------------------------|
| `method`             | `string`                             | Request method.                    |
| `params`             | `object`                             | Request parameters.                |
| `progress`           | `null\|((progress: number) => void)` | Progress handler.                  |
| `customKeyForResult` | `string\|null`                       | Custom field for grouping results. |

Returns a `Promise` that resolves to a [`Result`](/docs/core/result/).

### `fetchListMethod` {#fetchListMethod}

```ts
fetchListMethod(
  method: string,
  params ? : any,
  idKey ? : string,
  customKeyForResult ? : string | null
): AsyncGenerator<any[]>
```

Calls a REST API list method and returns a generator object.

| Parameter            | Type           | Description                          |
|----------------------|----------------|--------------------------------------|
| `method`             | `string`       | Request method.                      |
| `params`             | `any`          | Request parameters.                  |
| `idKey`              | `string`       | Entity ID field name ('ID' or 'id'). |
| `customKeyForResult` | `string\|null` | Custom field for grouping results.   |

### `callBatch` {#callBatch}

```ts
callBatch(
  calls: Array<any> | object,
  isHaltOnError ? : boolean,
  returnAjaxResult ? : boolean
): Promise<Result>
```

Executes a batch request with a maximum of 50 commands.

| Parameter          | Type                 | Description                                                                |
|--------------------|----------------------|----------------------------------------------------------------------------|
| `calls`            | `Array<any>\|object` | Batch of requests.                                                         |
| `isHaltOnError`    | `boolean`            | Halt execution on error.                                                   |
| `returnAjaxResult` | `boolean`            | Return `Record<string \| number, AjaxResult> \| AjaxResult[]` in response. |

Returns a `Promise` that resolves to an [`AjaxResult`](/docs/core/ajax-result/).

[Similar function](https://apidocs.bitrix24.com/api-reference/bx24-js-sdk/how-to-call-rest-methods/bx24-call-batch.html)

### `callBatchByChunk` {#callBatchByChunk}

```ts
callBatchByChunk(
  calls: Array<any>,
  isHaltOnError: boolean
): Promise<Result>
```

Executes a batch request with any number of commands.

| Parameter       | Type         | Description              |
|-----------------|--------------|--------------------------|
| `calls`         | `Array<any>` | Batch of requests.       |
| `isHaltOnError` | `boolean`    | Halt execution on error. |

Returns a `Promise` that resolves to an [`AjaxResult`](/docs/core/ajax-result/).

### `getHttpClient` {#getHttpClient}

```ts
getHttpClient(): TypeHttp
```

::note
@todo add TypeHttp
::

Returns an HTTP client implementing the `TypeHttp` interface for requests.



::tip
You can test working with **B24Hook** in this [example](https://github.com/bitrix24/b24sdk-examples/blob/main/js/02-nuxt-hook/pages/hook/crm-item-list.client.vue).
::
