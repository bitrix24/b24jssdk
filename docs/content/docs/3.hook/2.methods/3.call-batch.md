---
title: B24Hook::callBatch()
description: 'Use B24Hook.callBatch() to @todo.'
navigation:
  title: callBatch
links:
  - label: B24Hook
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/hook/controller.ts
  - label: TypeB24
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/b24.ts
  - label: LoggerBrowser
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/logger/browser.ts
---

::warning{title="üìù NOTE: PAGE STATUS"}
This page is under development. Some details may be clarified later.
::

::caution{title="‚ö†Ô∏è CAUTION: SECURITY"}
The `B24Hook` object is intended **exclusively for use on the server**.

- A webhook contains a secret access key, which **MUST NOT** be used in client-side code (browser, mobile app).
- For the client side, use [`B24Frame`](/docs/frame/).
::

## Usage

`callBatch(): ??`{lang="ts-type"}

::caution
@todo
::

```ts
callBatch(
  calls: Array<any> | object,
  isHaltOnError ? : boolean,
  returnAjaxResult ? : boolean
): Promise<Result>
```

Executes a batch request with a maximum of 50 commands.

| Parameter          | Type                 | Description                                                                |
|--------------------|----------------------|----------------------------------------------------------------------------|
| `calls`            | `Array<any>\|object` | Batch of requests.                                                         |
| `isHaltOnError`    | `boolean`            | Halt execution on error.                                                   |
| `returnAjaxResult` | `boolean`            | Return `Record<string \| number, AjaxResult> \| AjaxResult[]` in response. |

Returns a `Promise` that resolves to an [`AjaxResult`](/docs/core/ajax-result/).

[Similar function](https://apidocs.bitrix24.com/api-reference/bx24-js-sdk/how-to-call-rest-methods/bx24-call-batch.html)


### Parameters

::caution
@todo
::

| Parameter | Type                     | Description                                                                              |
|-----------|--------------------------|------------------------------------------------------------------------------------------|

### Returns

::caution
@todo
::

## Examples

::caution
@todo
::

---

Construct from webhook URL and call REST API:

```ts
import { B24Hook, EnumCrmEntityTypeId, LoggerBrowser, Result } from '@bitrix24/b24jssdk'

const $logger = LoggerBrowser.build('MyApp', import.meta.env?.DEV === true)

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/k32t88gf3azpmwv3')

// Batch (array syntax)
const batch: Result = await $b24.callBatch([
  ['crm.item.list', { entityTypeId: EnumCrmEntityTypeId.company, select: ['id'] }],
  ['crm.item.list', { entityTypeId: EnumCrmEntityTypeId.contact, select: ['id'] }]
], true)

$logger.info('batch:', batch.getData())
```

---

This code creates an instance of `B24Hook` to interact with the Bitrix24 API and performs a batch request to retrieve a list of companies, sorting them by ID in descending order.

The retrieved data is transformed into an array of objects with fields `id`, `title`, and `createdTime`, after which the results are logged to the console, and in case of an error, an error message is displayed.

```ts
import { B24Hook, Text, EnumCrmEntityTypeId, LoggerBrowser, Result } from '@bitrix24/b24jssdk'
import type { SODate } from '@bitrix24/b24jssdk'

const $logger = LoggerBrowser.build('MyApp', import.meta.env?.DEV === true)

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
const $b24 = new B24Hook({
  b24Url: 'https://your_domain.bitrix24.com',
  userId: 123,
  secret: 'k32t88gf3azpmwv3',
})

/**
 * @memo You should not use hook requests on the front-end side.
 * This operation is unsafe. Instead, use the back-end.
 */
$b24.callBatch({
  CompanyList: {
    method: 'crm.item.list',
    params: {
      entityTypeId: EnumCrmEntityTypeId.company,
      order: { id: 'desc' },
      select: ['id', 'title', 'createdTime']
    }
  }
}, true)
  .then((response: Result) => {
    const data = response.getData()
    const dataList = (data.CompanyList.items || []).map((item: any) => {
      return {
        id: Number(item.id),
        title: item.title,
        createdTime: Text.toDateTime(item.createdTime as ISODate)
      }
    })
    $logger.info('response >> ', dataList)
  })
  .catch((error) => {
    $logger.error(error)
  })
  .finally(() => {
    $logger.info('load >> stop ')
  })
```

## Next Steps

Core API methods:

- [callMethod()](/docs/hook/methods/call-method/) ‚Äî Call any REST API method
- [callBatch()](/docs/hook/methods/call-batch/) ‚Äî Batch execution of up to 50 commands

Working with lists:

- [callFastListMethod()](/docs/hook/methods/call-fast-list-method/) ‚Äî Automatic retrieval of all list pages
- [fetchListMethod()](/docs/hook/methods/fetch-list-method/) ‚Äî Incremental loading of large lists via generator

Advanced scenarios:

- [callBatchByChunk()](/docs/hook/methods/call-batch-by-chunk/) ‚Äî Batch execution of any number of commands with automatic chunking
