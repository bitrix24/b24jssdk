---
title: B24Hook
description: 'Use B24Hook for making Bitrix24 REST API calls from the server. Authentication is embedded in the webhook path.'
links:
  - label: B24Hook
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/hook/controller.ts
  - label: AuthHookManager
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/hook/auth.ts
  - label: TypeB24
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/b24.ts
---

::warning
We are still updating this page. Some data may be missing here — we will complete it shortly.
::

::caution
Webhook (B24Hook) is not safe for client-side use — keep and use it only on the server
::

## Creating an instance:

### fromWebhookUrl

`static fromWebhookUrl(url: string): B24Hook`{lang="ts-type"}

Static method creates a `B24Hook` instance from a full webhook URL.

| Parameter | Type                     | Description                                                                        |
|-----------|--------------------------|------------------------------------------------------------------------------------|
| `url`     | `string`{lang="ts-type"} | Bitrix24 webhook URL, for example: `https://your_domain.bitrix24.com/rest/1/xxx/`  |

**Example:**

```ts
import { B24Hook } from '@bitrix24/b24jssdk'

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
```

### constructor

`constructor(b24HookParams: B24HookParams)`{lang="ts-type"}

Constructor creates a B24Hook instance from parameters of type [`B24HookParams`](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/auth.ts):

| Parameter | Type                     | Description                                                          |
|-----------|--------------------------|----------------------------------------------------------------------|
| `b24Url`  | `string`{lang="ts-type"} | Bitrix24 portal URL, for example: `https://your_domain.bitrix24.com` |
| `userId`  | `number`{lang="ts-type"} | User identifier                                                      |
| `secret`  | `string`{lang="ts-type"} | Secret key                                                           |

**Example:**

```ts
import { B24Hook } from '@bitrix24/b24jssdk'

const $b24 = new B24Hook({
  b24Url: 'https://your_domain.bitrix24.com',
  userId: 123,
  secret: 'k32t88gf3azpmwv3'
})
```

## Methods

### offClientSideWarning

`offClientSideWarning(): void`{lang="ts-type"}

Disables warning about front-end query execution.

::caution
You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
::

## Interface TypeB24

B24Hook implements the [`TypeB24`](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/b24.ts) interface.

::field-group

::field{name="isInit" type="get isInit(): boolean"}
Getter. Indicates whether the data is initialized.
[Similar function](https://apidocs.bitrix24.com/sdk/bx24-js-sdk/system-functions/bx24-init.html) in BX24.js.
::

::field{name="auth" type="get auth(): AuthActions"}
Getter. Returns an instance [AuthHookManager](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/hook/auth.ts) that implements the [AuthActions](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/auth.ts) interface, which contains methods for handling authorization operations.
::

::field{name="getTargetOrigin()" type="string"}
Returns the Bitrix24 address (e.g., `https://your_domain.bitrix24.com`). [Similar function](https://apidocs.bitrix24.com/sdk/bx24-js-sdk/additional-functions/bx24-get-domain.html) in BX24.js.
::

::field{name="getTargetOriginWithPath()" type="string"}
Returns the Bitrix24 address (e.g., `https://your_domain.bitrix24.com/rest/1/xxx`). [Similar function](https://apidocs.bitrix24.com/sdk/bx24-js-sdk/additional-functions/bx24-get-domain.html) in BX24.js.
::

::field{name="setLogger(logger: LoggerBrowser)" type="void"}
Sets the [logger](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/logger/browser.ts).
::

::field{name="getLogger()" type="LoggerBrowser"}
Returns the [logger](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/logger/browser.ts).
::

::

Minimal contract

- callMethod, callBatch, callListMethod, fetchListMethod

## Examples

::caution
You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
::

Construct from webhook URL and call REST API:

```ts
import { B24Hook, EnumCrmEntityTypeId, LoggerBrowser, Result } from '@bitrix24/b24jssdk'

const $logger = LoggerBrowser.build('MyApp', import.meta.env?.DEV === true)

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/k32t88gf3azpmwv3')

// Single method
const res = await $b24.callMethod(
  'crm.item.list',
  {
    entityTypeId: EnumCrmEntityTypeId.company,
    order: { id: 'desc' },
  }
)
$logger.info('companies:', res.getData().result)

// Batch (array syntax)
const batch: Result = await $b24.callBatch([
  ['crm.item.list', { entityTypeId: EnumCrmEntityTypeId.company, select: ['id'] }],
  ['crm.item.list', { entityTypeId: EnumCrmEntityTypeId.contact, select: ['id'] }]
], true)

$logger.info('batch:', batch.getData())
```

This code creates an instance of `B24Hook` to interact with the Bitrix24 API and performs a batch request to retrieve a list of companies, sorting them by ID in descending order.

The retrieved data is transformed into an array of objects with fields `id`, `title`, and `createdTime`, after which the results are logged to the console, and in case of an error, an error message is displayed.

::caution
You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
::

```ts
import { B24Hook, Text, EnumCrmEntityTypeId, LoggerBrowser, Result } from '@bitrix24/b24jssdk'
import type { SODate } from '@bitrix24/b24jssdk'

const $logger = LoggerBrowser.build('MyApp', import.meta.env?.DEV === true)

const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/xxxx/')
const $b24 = new B24Hook({
  b24Url: 'https://your_domain.bitrix24.com',
  userId: 123,
  secret: 'k32t88gf3azpmwv3',
})

/**
 * @memo You should not use hook requests on the front-end side.
 * This operation is unsafe. Instead, use the back-end.
 */
$b24.callBatch({
  CompanyList: {
    method: 'crm.item.list',
    params: {
      entityTypeId: EnumCrmEntityTypeId.company,
      order: { id: 'desc' },
      select: ['id', 'title', 'createdTime']
    }
  }
}, true)
  .then((response: Result) => {
    const data = response.getData()
    const dataList = (data.CompanyList.items || []).map((item: any) => {
      return {
        id: Number(item.id),
        title: item.title,
        createdTime: Text.toDateTime(item.createdTime as ISODate)
      }
    })
    $logger.info('response >> ', dataList)
  })
  .catch((error) => {
    $logger.error(error)
  })
  .finally(() => {
    $logger.info('load >> stop ')
  })
```

Listing helpers

::caution
You should not use hook requests on the front-end side. This operation is unsafe. Instead, use the back-end.
::

```ts
// Pull a full list with automatic paging
const list = await $b24.callListMethod('crm.item.list', {
  entityTypeId: EnumCrmEntityTypeId.deal,
  select: ['id', 'title']
})
console.log(list.getData()) // array of items

// Or stream chunks
for await (const chunk of $b24.fetchListMethod('crm.item.list', { entityTypeId: EnumCrmEntityTypeId.deal }, 'id')) {
  console.log('chunk size', chunk.length)
}
```

---

::tip
You can test working with **B24Hook** in this [example](https://github.com/bitrix24/b24sdk-examples/blob/main/js/02-nuxt-hook/pages/hook/crm-item-list.client.vue).
::


---
outline: deep
---

# `TypeB24` {#TypeB24}

```ts
import { type TypeB24 } from '@bitrix24/b24jssdk'
```

Implementation:

- [AbstractB24](core-abstract-b24)
  - [Hook](hook-index)
  - [Frame](frame-index)

## Getters {#getters}

### `isInit` {#isInit}

```ts
get isInit(): boolean
```

Indicates whether the data is
initialized. [Similar function](https://apidocs.bitrix24.com/api-reference/bx24-js-sdk/system-functions/bx24-init.html)

### `auth` {#auth}

```ts
get auth(): AuthActions
```

Returns the [`AuthActions`](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/types/auth.ts) interface
for handling authorization.

## Methods {#methods}

### `init` {#init}

```ts
init(): Promise<void>
```

Used to initialize data.

### `destroy` {#destroy}

```ts
destroy(): void
```

Used to destroy or clean up resources.

### `getLogger` {#getLogger}

```ts
getLogger(): LoggerBrowser
```

Returns the current [logger](core-logger-browser).

### `setLogger` {#setLogger}

```ts
setLogger(
  logger: LoggerBrowser
): void
```

Sets the [logger](core-logger-browser).

### `getTargetOrigin` {#getTargetOrigin}

```ts
getTargetOrigin(): string
```

Returns the Bitrix24 address (e.g.,
`https://name.bitrix24.com`). [Similar function](https://apidocs.bitrix24.com/api-reference/bx24-js-sdk/additional-functions/bx24-get-domain.html)

### `getTargetOriginWithPath` {#getTargetOriginWithPath}

```ts
getTargetOriginWithPath(): string
```

Returns the Bitrix24 REST API address (e.g.,
`https://name.bitrix24.com/rest`). [Similar function](https://apidocs.bitrix24.com/api-reference/bx24-js-sdk/additional-functions/bx24-get-domain.html)

### `callMethod` {#callMethod}

```ts
callMethod(
  method: string,
  params ? : object,
  start ? : number
): Promise<AjaxResult>
```

Calls a REST API method with the specified parameters.

Returns a `Promise` that resolves to an [`AjaxResult`](core-ajax-result).

[Similar function](https://apidocs.bitrix24.com/api-reference/bx24-js-sdk/how-to-call-rest-methods/bx24-call-method.html)

### `callListMethod` {#callListMethod}

```ts
callListMethod(
  method: string,
  params ? : object,
  progress ? : null | ((progress: number) => void),
  customKeyForResult ? : string | null
): Promise<Result>
```

Calls a REST API list method with the specified parameters.

| Parameter            | Type                                 | Description                        |
|----------------------|--------------------------------------|------------------------------------|
| `method`             | `string`                             | Request method.                    |
| `params`             | `object`                             | Request parameters.                |
| `progress`           | `null\|((progress: number) => void)` | Progress handler.                  |
| `customKeyForResult` | `string\|null`                       | Custom field for grouping results. |

Returns a `Promise` that resolves to a [`Result`](core-result).

### `fetchListMethod` {#fetchListMethod}

```ts
fetchListMethod(
  method: string,
  params ? : any,
  idKey ? : string,
  customKeyForResult ? : string | null
): AsyncGenerator<any[]>
```

Calls a REST API list method and returns a generator object.

| Parameter            | Type           | Description                          |
|----------------------|----------------|--------------------------------------|
| `method`             | `string`       | Request method.                      |
| `params`             | `any`          | Request parameters.                  |
| `idKey`              | `string`       | Entity ID field name ('ID' or 'id'). |
| `customKeyForResult` | `string\|null` | Custom field for grouping results.   |

### `callBatch` {#callBatch}

```ts
callBatch(
  calls: Array<any> | object,
  isHaltOnError ? : boolean,
  returnAjaxResult ? : boolean
): Promise<Result>
```

Executes a batch request with a maximum of 50 commands.

| Parameter          | Type                 | Description                                                                |
|--------------------|----------------------|----------------------------------------------------------------------------|
| `calls`            | `Array<any>\|object` | Batch of requests.                                                         |
| `isHaltOnError`    | `boolean`            | Halt execution on error.                                                   |
| `returnAjaxResult` | `boolean`            | Return `Record<string \| number, AjaxResult> \| AjaxResult[]` in response. |

Returns a `Promise` that resolves to an [`AjaxResult`](core-ajax-result).

[Similar function](https://apidocs.bitrix24.com/api-reference/bx24-js-sdk/how-to-call-rest-methods/bx24-call-batch.html)

### `callBatchByChunk` {#callBatchByChunk}

```ts
callBatchByChunk(
  calls: Array<any>,
  isHaltOnError: boolean
): Promise<Result>
```

Executes a batch request with any number of commands.

| Parameter       | Type         | Description              |
|-----------------|--------------|--------------------------|
| `calls`         | `Array<any>` | Batch of requests.       |
| `isHaltOnError` | `boolean`    | Halt execution on error. |

Returns a `Promise` that resolves to an [`AjaxResult`](core-ajax-result).

### `getHttpClient` {#getHttpClient}

```ts
getHttpClient(): TypeHttp
```

Returns an HTTP client implementing the [TypeHttp](types-type-http) interface for requests.
