---
title: CallV2.make
description: 'Метод для выполнения вызовов Bitrix24 REST API версии 2.'
category: 'actions'
restApiVersion: 'rest-api-ver2'
navigation.title: Call
links:
  - label: CallV2
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/core/actions/v2/call.ts
  - label: AjaxResult
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/core/http/ajax-result.ts
  - label: AjaxError
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/core/http/ajax-error.ts
  - label: SdkError
    iconName: GitHubIcon
    to: https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/core/sdk-error.ts
---

::warning
We are still updating this page. Some data may be missing here — we will complete it shortly.
::

::caution{title="⚠️ УСТАРЕВАНИЕ REST API"}
**Bitrix24 постепенно переходит на REST API версии 3**.

- При вызове методов, [доступных в REST API v3](https://apidocs.bitrix24.com/api-reference/rest-v3/index.html), метод автоматически выводит предупреждение в лог.
::

## Краткий обзор

Используйте `CallV2.make()`{lang="ts-type"} для вызова методов REST API версии 2.

Метод возвращает `Promise` с объектом `AjaxResult`{lang="ts-type"}, содержащим данные ответа, статус и методы для обработки ошибок.

```ts
// Базовое использование
import { EnumCrmEntityTypeId } from '@bitrix24/b24jssdk'

const response = await $b24.actions.v2.call.make({
  method: 'crm.contact.get',
  params: {
    entityTypeId: EnumCrmEntityTypeId.contact,
    id: 123
  },
  requestId: 'unique-request-id'
})
```

## Сигнатура метода

```ts-type
make<T = unknown>(
  options: ActionCallV2
): Promise<AjaxResult<T>>
```

### Параметры

Объект `options` содержит следующие свойства:

| Параметр        | Тип                              | Обязательный | Описание                                                                                             |
|-----------------|----------------------------------|--------------|------------------------------------------------------------------------------------------------------|
| **`method`**    | `string`{lang="ts-type"}         | Да           | Название метода REST API (например, `crm.contact.get`, `tasks.task.get`).                            |
| **`params`**    | `TypeCallParams`{lang="ts-type"} | Нет          | Объект с параметрами для передачи в метод REST API.                                                  |
| **`requestId`** | `string`{lang="ts-type"}         | Нет          | Уникальный идентификатор запроса для отслеживания. Используется для дедупликации запросов и отладки. |

### Возвращаемое значение

`Promise<AjaxResult<T>>`{lang="ts-type"} — промис, который разрешается в объект [`AjaxResult`{lang="ts-type"}](https://github.com/bitrix24/b24jssdk/blob/main/packages/jssdk/src/core/http/ajax-result.ts).

Этот объект предоставляет:

- `.getData(): Payload<T>`{lang="ts-type"} — возвращает ответ REST API.
- `.isSuccess: boolean`{lang="ts-type"} — флаг, указывающий на успешное выполнение запроса.
- `.getErrorMessages(): string[]`{lang="ts-type"} — массив сообщений об ошибках.
- `.isMore(): boolean`{lang="ts-type"} — указывает на наличие дополнительных данных при постраничной навигации.


## Ключевые концепции

### Автоматическое предупреждение

При вызове методов, которые **доступны в REST API версии 3**, система автоматически выводит предупреждение в лог:

```json
"The method {method_name} is available in restApi:v3. It's worth migrating to the new API."
```

Это указывает на то, что следует рассмотреть возможность миграции на более новую версию REST API.

## Обработка ошибок

Всегда проверяйте результат с помощью `isSuccess` и обрабатывайте ошибки:

```ts
const response = await $b24.actions.v2.call.make({
  method: 'some.legacy.method',
  params: { /* параметры */ },
  requestId: 'unique-request-id'
})

if (!response.isSuccess) {
  // Handling error
  console.error(new Error(`Error: ${response.getErrorMessages().join('; ')}`))
  return
}

// Working with a successful result
const data = response.getData()
```

## Examples

### Получение контакта CRM

```ts [CrmItem.ts]
import { B24Hook, LoggerFactory, SdkError, AjaxError } from '@bitrix24/b24jssdk'

type Contact = {
  id: number
  title: string
  [key: string]: any
}

const devMode = typeof import.meta !== 'undefined' && (globalThis._importMeta_.env?.DEV || false)
const $logger = LoggerFactory.createForBrowser('Example:getCrmItem', devMode)
const $b24 = B24Hook.fromWebhookUrl('https://your_domain.bitrix24.com/rest/1/webhook_code/')

async function getCrmItem(entityTypeId: number, itemId: number, requestId: string): Promise<Contact | null> {
  const response = await $b24.actions.v2.call.make<{ item: Contact }>({
    method: 'crm.item.get',
    params: { 
     entityTypeId: entityTypeId,
     id: itemId
    },
    requestId
  })

  if (!response.isSuccess) {
    throw new SdkError({
      code: 'MY_APP_GET_PROBLEM'
      description: `Problem ${response.getErrorMessages().join('; ')}`,
      status: 404
    })
  }

  return response.getData().result?.item
}

// Использование
const itemId = 5284
const requestId = `crm-item-${itemId}`
try {
  const entity = await getCrmItem(EnumCrmEntityTypeId.company, itemId, )
  $logger.info(`Entity [${entity?.id}]`, { entity })
} catch (error) {
  if (error instanceof AjaxError) {
    $logger.critical(error.message, { requestId, code: error.code })
  } else {
    $logger.alert('Problem', { requestId, error })
  }
}
```

## Альтернативы и рекомендации

* **For working with lists:** Instead of manually managing pagination use:
  * [`CallList`](/docs/working-with-the-rest-api/call-list-rest-api-ver2/) — automatically retrieves all pages and returns a single result.
  * [`FetchList`](/docs/working-with-the-rest-api/fetch-list-rest-api-ver2/) — returns an async generator for step-by-step processing of large lists.
* **For batch operations:** Use [`Batch`](/docs/working-with-the-rest-api/batch-rest-api-ver2/) to execute up to 50 commands in a single request.
* **On the client-side (browser):** Use the built-in [`B24Frame`](/docs/getting-started/installation/vue/#init) object.
